<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Li Ziyi">
<meta name="dcterms.date" content="2023-01-19">

<title>Visual-Analytics-Applications - Take-home Exercise 01</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Visual-Analytics-Applications</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-hands-on-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Hands-on Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-hands-on-exercise">    
        <li>
    <a class="dropdown-item" href="../../Hands-on_Ex/Ex01/Ex01.html">
 <span class="dropdown-text">Exercise 1</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Take-home Exercise</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-exercise">    
        <li>
    <a class="dropdown-item" href="../../Take-home_Ex/Ex01/Take-home_Ex01.html">
 <span class="dropdown-text">Exercise 1</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">1. Introduction</a></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">2. Data Preparation</a>
  <ul class="collapse">
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning">Data Cleaning</a></li>
  <li><a href="#data-loading" id="toc-data-loading" class="nav-link" data-scroll-target="#data-loading">Data Loading</a></li>
  </ul></li>
  <li><a href="#data-visualisation" id="toc-data-visualisation" class="nav-link" data-scroll-target="#data-visualisation">3. Data Visualisation</a>
  <ul class="collapse">
  <li><a href="#overall-singaporean-population-pyramid" id="toc-overall-singaporean-population-pyramid" class="nav-link" data-scroll-target="#overall-singaporean-population-pyramid">Overall Singaporean Population Pyramid</a></li>
  <li><a href="#selection-of-nine-planning-areas" id="toc-selection-of-nine-planning-areas" class="nav-link" data-scroll-target="#selection-of-nine-planning-areas">Selection of Nine Planning Areas</a></li>
  <li><a href="#trellis-display-of-population-pyramid-of-the-nine-planning-areas" id="toc-trellis-display-of-population-pyramid-of-the-nine-planning-areas" class="nav-link" data-scroll-target="#trellis-display-of-population-pyramid-of-the-nine-planning-areas">Trellis Display of Population Pyramid of The Nine Planning Areas</a></li>
  <li><a href="#final-dashboard" id="toc-final-dashboard" class="nav-link" data-scroll-target="#final-dashboard">Final Dashboard</a></li>
  </ul></li>
  <li><a href="#observation-and-insights-not-more-than-500-words" id="toc-observation-and-insights-not-more-than-500-words" class="nav-link" data-scroll-target="#observation-and-insights-not-more-than-500-words">4. Observation and Insights (not more than 500 words)</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Take-home Exercise 01</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Li Ziyi </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 19, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">1. Introduction</h2>
<p>In this exercise, the basic demographic structure of Singapore top 9 biggest planning areas categorised by gender and age group is being studied.</p>
<p>Data used is extracted from <a href="https://www.singstat.gov.sg/find-data/search-by-theme/population/geographic-distribution/latest-data">Department of Statistics, Singapore</a>. The population data snapshot from June 2022 is being studied mainly.</p>
</section>
<section id="data-preparation" class="level2">
<h2 class="anchored" data-anchor-id="data-preparation">2. Data Preparation</h2>
<p>Inside the downloaded excel file, there are “Total” elements inside all columns. To load into Tableau for visualization and therefore, for better analysis purpose, we will need to do some basic data cleaning.</p>
<div class="cell">

</div>
<section id="data-cleaning" class="level3">
<h3 class="anchored" data-anchor-id="data-cleaning">Data Cleaning</h3>
<p>With the raw excel file not to be touched, a new Excel document is created to consolidate all needed raw data with the same table headers pasted over.</p>
<p>Given that planning area level data are to be studied, “Total Planning Area” and “Total Male and Female” data are removed as they are now redundant. If needed, total could be easily computed inside Tableau by summing up all the rest data.</p>
<p>Both male and female data are copied and consolidated into our new Excel files. A new column “Gender” is introduced. All data entries pasted are tagged accordingly based on the raw data.</p>
<p>Save the Excel data file and rename it properly.</p>
<div class="cell" data-layout-align="center" data-fig.cap.align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Img/Excel_data.PNG" class="img-fluid figure-img" width="960"></p>
<p></p><figcaption class="figure-caption">Excel data prepared</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="data-loading" class="level3">
<h3 class="anchored" data-anchor-id="data-loading">Data Loading</h3>
<p>Open a new Tableau workbook and import data using the Excel file.</p>
<p>For easier data manipulation later on, switch the data type of ‘2022’ to integer from text (highlighted in yellow).</p>
<div class="cell" data-layout-align="center" data-fig.cap.align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Img/Tableau_data_loading.PNG" class="img-fluid figure-img" width="960"></p>
<p></p><figcaption class="figure-caption">Tableau data loading</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="data-visualisation" class="level2">
<h2 class="anchored" data-anchor-id="data-visualisation">3. Data Visualisation</h2>
<p>Age-sex pyramid was taught be an analytical visualisation commonly used by demographers to reveal the structure of population by gender and age group.</p>
<section id="overall-singaporean-population-pyramid" class="level3">
<h3 class="anchored" data-anchor-id="overall-singaporean-population-pyramid">Overall Singaporean Population Pyramid</h3>
<p>Two calculated fields are created to facilitate the visualisation preparation:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># | output: asis</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>Male<span class="sc">:</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> [Gender]<span class="ot">=</span><span class="st">"MALE"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>then [<span class="dv">2022</span>]</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>END</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>Female<span class="sc">:</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> [Gender]<span class="ot">=</span><span class="st">"MALE"</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>then [<span class="dv">2022</span>]</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>END</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To produce the desired visualisation, follow below steps:</p>
<ul>
<li><p>Drag the ‘Age Group’ from Data panel into Filters section, select ‘All’ and de-select ‘Total’ option at the bottom of the list.</p></li>
<li><p>Drag the ‘Subzone’ from Data panel into Filters section, select ‘All’ and de-select ‘Total’ option inside the list.</p></li>
<li><p>Drag the ‘Type of Dwelling’ from Data panel into Filters section, select ‘Total’ option at the bottom of the list.</p></li>
<li><p>Drag the two created measures from Data panel into columns bar.</p></li>
<li><p>Drag the ‘Age Group’ from Data panel into rows bar.</p></li>
<li><p>Sort the ‘Age Group’ by clicking the white downwards pointing arrow, choose ‘Sort’ and sort by ‘Alphabetic’ in descending order.</p></li>
<li><p>Drag the line ‘5-9’ inside the worksheet from ‘Age Group’ column to one line above ‘0-4’. With this, the age group should have been sorted in a descending manner entirely.</p></li>
<li><p>Drag the ‘Female’ from Data panel into Marks section ‘Color’. Choose a color that you would like to assign to Female population data. Here, color pink is used.</p></li>
<li><p>Drag the ‘Male’ from Data panel into Marks section ‘Color’, Choose a color that you would like to assign to Male population data. Here, color blue is used.</p></li>
</ul>
<p>Therefore, a population pyramid of Singapore has been completed. See below.</p>
<div class="cell" data-layout-align="center" data-fig.cap.align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Img/SG_Pyramid.png" class="img-fluid figure-img" width="960"></p>
<p></p><figcaption class="figure-caption">Population pyramid of Singapore</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="selection-of-nine-planning-areas" class="level3">
<h3 class="anchored" data-anchor-id="selection-of-nine-planning-areas">Selection of Nine Planning Areas</h3>
<p>The task requested nine planning areas to be presented on a single view.</p>
<p>To find out areas to work on, it’s more of my interest to filter based on total population. Below are actions that I have taken to achieve that.</p>
<ul>
<li><p>Drag the ‘2022’ values from Data panel into columns bar.</p></li>
<li><p>Drag the ‘Planning Area’ text from Data panel into rows bar.</p></li>
<li><p>Drag the ‘Age Group’ item from Data panel into Filters section, select ‘Total’.</p></li>
<li><p>Drag the ‘Subzone’ item from Data panel into Filters section, select ‘Total’.</p></li>
<li><p>Drag the ‘Type of Dwelling’ item from Data panel into Filters section, select ‘Total’.</p></li>
<li><p>Drag the ‘Gender’ item from Data panel into Filters section, select ‘TOTAL’.</p></li>
<li><p>Sort the ‘Planning’ by clicking the white downwards pointing arrow, choose ‘Sort’ and sort by ‘Field’ in descending order. Choose the field to be sorted with to be ‘2022’ from the drop-down list. The aggregation we use here remains ‘Sum’.</p></li>
</ul>
<p>This would enable us to visualise the top few planning areas according to total area population. However, to make the list of top area more clearly, additional calculated fields ‘Labels’ and ‘Top N Planning Area’ were created, together with an additional parameter ‘Top Planning Areas’. Since this is not compulsory step to achieve the requirement, I will not go into step by step details on this part. If interested, you may find workings inside the workbook attached.</p>
<p>Hence, below chart is completed.</p>
<div class="cell" data-layout-align="center" data-fig.cap.align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Img/Total_top_9.png" class="img-fluid figure-img" width="960"></p>
<p></p><figcaption class="figure-caption">Top 9 planning area by total population</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>From here, the 9 areas that is being chosen to study on are Bedok, Tampines, Jurong West, Sengkang, Woodlands, Hougang, Yishun, Choa Chu Kang and Punggol. For the analysis purpose later, a population pyramind of these chosen 9 areas are also plotted by following above Overall Singaporean Poppulation Pyramid steps, with an additional step of dragging ‘Planning Area’ data item from Data panel into Filters section, the nine chosen areas are therefore selected.</p>
<div class="cell" data-layout-align="center" data-fig.cap.align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Img/SG_top9areas_Pyramid.png" class="img-fluid figure-img" width="960"></p>
<p></p><figcaption class="figure-caption">Top 9 planning area population pyramid</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="trellis-display-of-population-pyramid-of-the-nine-planning-areas" class="level3">
<h3 class="anchored" data-anchor-id="trellis-display-of-population-pyramid-of-the-nine-planning-areas">Trellis Display of Population Pyramid of The Nine Planning Areas</h3>
<p>In this exercise, the nine planning areas are requested to be presented on a single view. To do that, a trellis display will be applied. Following below steps that will lead us to the desired output.</p>
<ul>
<li><p>Duplicate the worksheet ‘Population Pyramid_Top_9_Area_SG_2022’.</p></li>
<li><p>Rename the worksheet to ‘Trellis_Population Pyramid_Top_9_Area_SG_2022’.</p></li>
<li><p>Drag the ‘Planning Area’ text from Data panel into rows bar.</p></li>
</ul>
<p>The trellis display is therefore completed.</p>
<div class="cell" data-layout-align="center" data-fig.cap.align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Img/SG_top9areas_Trellis.png" class="img-fluid figure-img" width="960"></p>
<p></p><figcaption class="figure-caption">Top 9 planning area population pyramid</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="final-dashboard" class="level3">
<h3 class="anchored" data-anchor-id="final-dashboard">Final Dashboard</h3>
<p>The final dashboard is produced by putting together some significant worksheets. Here, three worksheets have been chosen to present together to complete the whole story.</p>
<div class="cell" data-layout-align="center" data-fig.cap.align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Img/Final_dashboard.png" class="img-fluid figure-img" width="960"></p>
<p></p><figcaption class="figure-caption">Top 9 planning area population pyramid</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="observation-and-insights-not-more-than-500-words" class="level2">
<h2 class="anchored" data-anchor-id="observation-and-insights-not-more-than-500-words">4. Observation and Insights (not more than 500 words)</h2>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>